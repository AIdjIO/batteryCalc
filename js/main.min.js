import*as batt from"./batterycalc.min.js";(function(t,e,a){"use strict";e.AjaxCommands.prototype.updateMotorPower=function(t,e,a){let l=document.querySelectorAll("#motor-container input[type=number]");l.forEach(t=>{t.removeEventListener("change",batt.updatePlotly)}),l.forEach(t=>{t.addEventListener("change",batt.updatePlotly)}),batt.updatePlotly()},e.behaviors.plotlyjs={attach:function(e,a){once("main","html",e).forEach(e=>{function a(t){let e=t.row(this.parentNode.parentNode).data();e.shift();let a=Object.fromEntries(i.map((t,a)=>[t,e[a]]));Object.keys(d).forEach(t=>{document.querySelector("input[data-drupal-selector="+t+"]").value="not applicable"===a[d[t]]?0:a[d[t]]})}function l(t){t.preventDefault(),console.log("generating PDF..."),makepdf()}let o=[...document.querySelectorAll("input[type=number], select, textarea")];o.forEach(t=>{t.addEventListener("change",batt.updatePlotly),t.addEventListener("keyup",batt.updatePlotly)});let n=new DataTable("#cell_table",{defaultStyle:{font:"Helvetica"},destroy:!0,responsive:{details:!1},bAutoWidth:!0,paging:!0,scrollX:!0,columnDefs:[{defaultContent:"-",targets:"_all",className:"dt-body-left"},{target:[1,7,8,10,17,18,19,21,22,23,24,25],visible:!1}],layout:{topEnd:{searchPanes:{initCollapsed:!0,viewTotal:!0,layout:"columns-4",columns:[2,5,4,3]}},topStart:{buttons:[{extend:"copyHtml5"},{extend:"csvHtml5"},{extend:"excelHtml5",title:"Cell DB"},{extend:"pdfHtml5",title:"Cell DB",download:"open",exportOptions:{modifier:{page:"current"}}}]},bottomEnd:{paging:{buttons:3}}}}),i=n.columns().header().map(t=>t.textContent).toArray();i.shift();let d={"edit-cell-voltage-nom":"nom_v","edit-cell-voltage-max":"max_v","edit-cell-voltage-min":"cutoff_v","edit-width":"width_mm","edit-height":"height_mm","edit-depth":"depth_mm","edit-diameter":"dia_mm","edit-cell-capacity":"ah_rate","edit-cell-mass":"mass_g"};n.rows().nodes().to$().find('input[type=radio][data-drupal-selector*="edit-cell-table-"]').each(function(t,e){e.removeEventListener("click",a),e.addEventListener("click",a.bind(this,n))}),batt.updatePlotly(),n.columns.adjust(),t(document).on("shown.bs.tab",function(e){for(var a=t(".tab-pane.active .js-plotly-plot"),l=0;l<a.length;l++)Plotly.relayout(a[l],{autosize:!0})});let c=document.getElementById("PDFRprt");c.removeEventListener("click",l),c.addEventListener("click",l)})}}})(jQuery,Drupal,once);